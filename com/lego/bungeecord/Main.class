package com.lego.bungeecord;

import java.io.File;
import java.io.IOException;
import java.io.InputStream;
import java.nio.file.CopyOption;
import java.nio.file.Files;
import net.md_5.bungee.api.plugin.Plugin;

public class Main extends Plugin {
    private static Main m;

    public Main() {
    }

    public static Main getInstance() {
        return m;
    }

    public void onEnable() {
        m = this;
        if (!this.getDataFolder().exists()) {
            this.getDataFolder().mkdirs();
        }

        this.getProxy().getPluginManager().registerCommand(this, new Hub());
        this.getProxy().getPluginManager().registerCommand(this, new Factions());
        this.getProxy().getPluginManager().registerCommand(this, new Skyblock());
        File file = new File(this.getDataFolder(), "config.yml");
        if (!file.exists()) {
            try {
                Throwable var2 = null;
                Object var3 = null;

                try {
                    InputStream in = this.getResourceAsStream("config.yml");

                    try {
                        Files.copy(in, file.toPath(), new CopyOption[0]);
                    } finally {
                        if (in != null) {
                            in.close();
                        }

                    }
                } catch (Throwable var12) {
                    if (var2 == null) {
                        var2 = var12;
                    } else if (var2 != var12) {
                        var2.addSuppressed(var12);
                    }

                    throw var2;
                }
            } catch (IOException var13) {
                var13.printStackTrace();
            }
        }

        ConfigManager.updateVersion();
    }
}
